<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Handcheck (tinygo)</title>
    <script src="wasm_exec.js" async></script>
    <script src="handcheck.js" async></script>
    <style>
        .und {
            text-decoration: underline;
        }
        .nerds {
            font-style: italic;
        }
    </style>
</head>

<body>

<h1>Mahjong hand solver</h1>
<p>This algorithm finds the optimal grouping for a mahjong hand. An optimal grouping minimises ungrouped tiles, then
    minimises the number of pairs. The optimal grouping for a hand is not necessarily a winning one.</p>

<p>
    <label for="inpHand">Hand: </label>
    <input type="text" id="inpHand"/>
    <button id="btnCheck" disabled>Check</button>
    <label for="chkSplit">Split</label>
    <input type="checkbox" id="chkSplit"/>
    <label for="chkMemo">Memo</label>
    <input type="checkbox" id="chkMemo" checked/>
</p>

<p id="result" style="font-size: 24pt"></p>
<p id="error" style="color: orangered">Loading... checker is 130KB+, please be patient</p>

<p>Notes:</p>
<ul>
    <li>Enter hands as two-character suit-value pairs separated by spaces.
    <li>Suits are <span class="und">b</span>amboo,
        <span class="und">c</span>oins,
        <span class="und">w</span>anzi,
        <span class="und">h</span>onours and
        <span class="und">f</span>lowers.
    </li>
    <li>Values are the digits 1-9, <span class="und">e</span>ast,
        <span class="und">s</span>outh,
        <span class="und">w</span>est,
        <span class="und">n</span>orth,
        <span class="und">z</span>hong,
        <span class="und">f</span>a and
        <span class="und">b</span>an.
    </li>
    <li>Solved hands are shown in the order of pengs/pongs, chis/chows and pairs.</li>
    <li>Interesting hands like 13 orphans or gang/kong are not implemented.</li>
</ul>
<p class="nerds">Notes for nerds:</p>
<ul class="nerds">
    <li>Split splits your hand into sub-hands of the same suit before solving.</li>
    <li>Memo controls memoization, turning it off will cause freezing on certain hands. Try it with 14 of the same tile. I
        think all goroutines run on the main thread in js/wasm.</li>
    <li>Check the console for call stats.</li>
    <li>The wasm is compiled with tinygo, it maaaay be "wrong" compared to gc.</li>
</ul>
</body>

</html>
